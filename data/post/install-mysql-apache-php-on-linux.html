<p>I've always wanted to have somewhere written down all the exact commands that will install a functional LAMP (Linux Apache MySQL PHP) server. <br />
I wrote them in a text file an year ago, i found them couple of days ago and decided to try them on a fresh Slackware server.</p>
<code>bash-3.1# uname -a
Linux slackware 2.6.29.6-smp #2 SMP Mon Aug 17 00:52:54 CDT 2009 i686 Pentium III (Katmai) GenuineIntel GNU/Linux
</code>
<p>I thought there are other people like me who need these command so check them out. If you have anything to add please comment.</p>
<p>In your home root create a folder <em>/kits/</em>. Mine is <em>/home/serban/kits</em>.</p>
<p><strong>1. Install MySQL </strong></p>
<code>groupadd mysql
useradd -g mysql -c "MySQL Server" mysql
</code>
<p>If you get any message like: <em>groupadd: cannot lock /etc/group; try again later.</em> this means you are not logged as root. Try '<em>su</em>' and enter password, or '<em>sudo su</em>' if you are at the console.</p>
<p>Browse to <a href="http://www.mysql.com/downloads/mysql/">http://www.mysql.com/downloads/mysql/</a> scroll and choose 'Generic Linux (Architecture Independent), Compressed TAR Archive' (around 22Mb) and download it.</p>
<code>tar -zxvf mysql-5.1.45.tar.gz
cd mysql-5.1.45
./configure --prefix=/usr/local/mysql --localstatedir=/usr/local/mysql/data --with-mysqld-user=mysql --with-unix-socket-path=/tmp/mysql.sock --with-charset=utf8
</code>
<p>If somewhere during config you get '<em>checking for termcap functions library... configure: error: No curses/termcap library found</em>', try this: locate libncurses , look for a path like /lib/libncursesw.so.5, the add the line '--with-named-curses-libs=/lib/libncursesw.so.5' to your config and run again.</p>
<p>If you get '<em>/bin/rm: cannot remove `libtoolT': No such file or directory</em>' at the end of the configure, this is actually not a MySQL bug, read: <a href="http://bugs.mysql.com/bug.php?id=47411">http://bugs.mysql.com/bug.php?id=47411</a> ; If you can't fix it don't worry about it.</p>
<code>make && make install
root@slack:/home/kit/mysql-5.1.22-rc# ./scripts/mysql_install_db

chown -R root:mysql /usr/local/mysql
chown -R mysql:mysql /usr/local/mysql/data

cp support-files/my-medium.cnf /etc/my.cnf
chown root:sys /etc/my.cnf
chmod 644 /etc/my.cnf

cp ./support-files/mysql.server /etc/rc.d/mysql
chmod +x /etc/rc.d/mysql
</code>
<p>Test the MySQL server:</p>
<code>root@slackware:~/kits/mysql-5.1.45# /etc/rc.d/mysql start
Starting MySQL SUCCESS!
root@slackware:~/kits/mysql-5.1.45# /etc/rc.d/mysql stop
Shutting down MySQL SUCCESS!
</code>
<p><strong>&nbsp;2. Installing&nbsp;Apache</strong></p>
<p>&nbsp;Browse to <a href="http://httpd.apache.org/download.cgi#apache22">http://httpd.apache.org/download.cgi#apache22</a> and download the Unix Source .tar.gz file</p>
<code>tar -zxvf httpd-2.2.6.tar.gz
cd httpd-2.2.6

./configure --prefix=/usr/local/apache2 --enable-shared=max --enable-rewrite --enable-module=so --enable-ssl --enable-deflate --enable-vhost-alias
make && make install
</code>
<p><strong>3. Installing PHP</strong></p>
<code>tar -zxvf php-5.2.4.tar.gz
cd php-5.2.4

./configure --prefix=/usr/local/php --with-apxs2=/usr/local/apache2/bin/apxs --with-mysql=/usr/local/mysql --with-curl --with-mysqli=/usr/local/mysql/bin/mysql_config --enable-exif --with-zlib --with-gd
make && make install

cp php.ini-dist /usr/local/php/lib/php.ini
pico /usr/local/php/lib/php.ini
</code>
<p>Notice that we have added cURL library to the PHP configuration. If that is not already installed on your Linux distro do this (the following applies to any additional module you need to PHP):</p>
<p>Browse to: <a href="http://www.php.net/curl">http://www.php.net/curl</a> ; <a href="http://curl.haxx.se/download.html">http://curl.haxx.se/download.html</a></p>
<code>cd /home/kit/
tar -zxvf curl-7.17.0.tar.gz
cd curl-7.17.0

./configure
make && make install
</code>
<p><strong>4. Configuring Apache to work with PHP</strong></p>
<code>pico httpd.conf
</code>
<p>Find the 'DirectoryIndex' line and modify it like this:</p>
<code><IfModule dir_module>
    DirectoryIndex index.html index.htm index.php
</IfModule>
</code>
<p>Find lines with 'AddType' (might be commented), add the following:</p>
<code>AddType application/x-httpd-php .php
AddType application/x-httpd-php-source .phps
</code>
<p>Save the conf and let's run a test:</p>
<code>/usr/local/apache2/bin/apachectl configtest
</code>

<p>Should give you something like:</p>
<code>httpd: Could not reliably determine the server's fully qualified domain name, using 127.0.0.1 for ServerName
Syntax OK
</code>
<p>Now create a shortcut for apache daemon</p>
<code>ln -s /usr/local/apache2/bin/apachectl /etc/rc.d/apache
</code>